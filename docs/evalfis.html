<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Octave Fuzzy Logic Toolkit: evalfis</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
    <script type="text/javascript" async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
    </script>
    <style>
    var {
      font-style: italics;
      font-weight: bold;
    }
    td {
      vertical-align: top;
    }
    </style>
  </head>
  <body>
    <div class="bg-dark">
      <div class="container-xl">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
          <div class="container-fluid">
            <a class="navbar-brand" href=index.html>
              <img src="assets/fuzzy-logic-toolkit.png" alt="fuzzy-logic-toolkit" class="d-inline-block align-top" width="25" height="25">
              Octave Fuzzy Logic Toolkit
            </a>
            <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="index.html#Evaluation">
                    <i class="fas fa-list-alt"></i>
                    Evaluation
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="https://gnu-octave.github.io/packages/">
                  <img src="assets/octave-logo.svg" alt="GNU Octave logo" class="d-inline-block align-top" width="25" height="25">
                    Octave Packages
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="https://www.octave.org">
                    <i class="fas fa-home"></i>
                    GNU Octave website
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </div>
    <div class="container-xl my-4">
      <div class="card rounded">
        <div class="card-header card-header-mod">
          <div class="row d-flex flex-wrap align-items-center">
            <div class="col-sm-3 col-md-5 mb-2 mb-sm-0">
              <h3 class="d-inline-block mr-2">
              Function&nbsp;Reference: <b><code>evalfis</code></b>
              </h3>
            </div>
          </div>
        </div>
        <div class="card-body">
<dl>
<dt><u>Function File:</u> <var>output</var> = <b>evalfis</b><i> (<var>user_input</var>, <var>fis</var>)</i></dt>
<dt><u>Function File:</u> <var>output</var> = <b>evalfis</b><i> (<var>user_input</var>, <var>fis</var>, <var>num_points</var>)</i></dt>
<dt><u>Function File:</u> [<var>output</var>, <var>rule_input</var>, <var>rule_output</var>, <var>fuzzy_output</var>] = <b>evalfis</b><i> (<var>user_input</var>, <var>fis</var>)</i></dt>
<dt><u>Function File:</u> [<var>output</var>, <var>rule_input</var>, <var>rule_output</var>, <var>fuzzy_output</var>] = <b>evalfis</b><i> (<var>user_input</var>, <var>fis</var>, <var>num_points</var>)</i></dt>
</dl>

<p> Return the crisp output(s) of an FIS for each row in a matrix of crisp input
 values.
 Also, for the last row of <var>user_input</var>, return the intermediate results:
</p>
<div class="ms-5">
 <dl compact="compact">
<dt> <var>rule_input</var></dt>
</dl>
<p> a matrix of the degree to which
 each FIS rule matches each FIS input variable
 </p></dd>
<dt> <var>rule_output</var></dt>
</dl>
<p> a matrix of the fuzzy output for each (rule, FIS output) pair
 </p></dd>
<dt> <var>fuzzy_output</var></dt>
</dl>
<p> a matrix of the aggregated output for each FIS output variable
 </p></dd>
</dl>

<p> The optional argument <var>num_points</var> specifies the number of points over
 which to evaluate the fuzzy values. The default value of <var>num_points</var> is
 101.
</p>
 <p> Argument <var>user_input</var>:
</p> 
<p> <var>user_input</var> is a matrix of crisp input values. Each row 
 represents one set of crisp FIS input values. For an FIS that has N inputs,
 an input matrix of z sets of input values will have the form:
</p>
 <table><tr><td>&nbsp;</td><td><pre class="example"> </pre><pre class="example"> [input_11 input_12 ... input_1N]  &lt;-- 1st row is 1st set of inputs
 [input_21 input_22 ... input_2N]  &lt;-- 2nd row is 2nd set of inputs
 [             ...              ]                 ...
 [input_z1 input_z2 ... input_zN]  &lt;-- zth row is zth set of inputs
 </pre><pre class="example"> </pre></td></tr></table>

 <p> Return value <var>output</var>:
</p>
<p> <var>output</var> is a matrix of crisp output values. Each row represents
 the set of crisp FIS output values for the corresponding row of
 <var>user_input</var>. For an FIS that has M outputs, an <var>output</var> matrix
 corresponding to the preceding input matrix will have the form:
</p>
 <table><tr><td>&nbsp;</td><td><pre class="example"> </pre><pre class="example"> [output_11 output_12 ... output_1M]  &lt;-- 1st row is 1st set of outputs
 [output_21 output_22 ... output_2M]  &lt;-- 2nd row is 2nd set of outputs
 [               ...               ]                 ...
 [output_z1 output_z2 ... output_zM]  &lt;-- zth row is zth set of outputs
 </pre><pre class="example"> </pre></td></tr></table>

 <p> The intermediate result <var>rule_input</var>:
</p> 
<p> The matching degree for each (rule, input value) pair is specified by the
 <var>rule_input</var> matrix. For an FIS that has Q rules and N input variables,
 the matrix will have the form:
 </p><table><tr><td>&nbsp;</td><td><pre class="example"> </pre><pre class="example">          in_1  in_2 ...  in_N
 rule_1 [mu_11 mu_12 ... mu_1N]
 rule_2 [mu_21 mu_22 ... mu_2N]
        [            ...      ]
 rule_Q [mu_Q1 mu_Q2 ... mu_QN]
 </pre><pre class="example"> </pre></td></tr></table>

 <p> Evaluation of hedges and &quot;not&quot;:
</p>
<p> Each element of each FIS rule antecedent and consequent indicates the
 corresponding membership function, hedge, and whether or not &quot;not&quot; should
 be applied to the result. The index of the membership function to be used is
 given by the positive whole number portion of the antecedent/consequent
 vector entry, the hedge is given by the fractional portion (if any), and
 &quot;not&quot; is indicated by a minus sign. A &quot;0&quot; as the integer portion in any
 position in the rule indicates that the corresponding FIS input or output
 variable is omitted from the rule.
</p>
<p> For custom hedges and the four built-in hedges &quot;somewhat,&quot; &quot;very,&quot;
 &quot;extremely,&quot; and &quot;very very,&quot; the membership function value (without the
 hedge or &quot;not&quot;) is raised to the power corresponding to the hedge. All
 hedges are rounded to 2 digits.
</p>
<p> For example, if &quot;mu(x)&quot; denotes the matching degree of the input to the
 corresponding membership function without a hedge or &quot;not,&quot; then the final
 matching degree recorded in <var>rule_input</var> will be computed by applying
 the hedge and &quot;not&quot; in two steps. First, the hedge is applied:
</p>
 <table><tr><td>&nbsp;</td><td><pre class="example"> </pre><pre class="example"> (fraction == .05) &lt;=&gt;  somewhat x       &lt;=&gt;  mu(x)^0.5  &lt;=&gt;  sqrt(mu(x))
 (fraction == .20) &lt;=&gt;  very x           &lt;=&gt;  mu(x)^2    &lt;=&gt;  sqr(mu(x))
 (fraction == .30) &lt;=&gt;  extremely x      &lt;=&gt;  mu(x)^3    &lt;=&gt;  cube(mu(x))
 (fraction == .40) &lt;=&gt;  very very x      &lt;=&gt;  mu(x)^4
 (fraction == .dd) &lt;=&gt;  &lt;custom hedge&gt; x &lt;=&gt;  mu(x)^(dd/10)
 </pre><pre class="example"> </pre></td></tr></table>

<p> After applying the appropriate hedge, &quot;not&quot; is calculated by:
 </p><table><tr><td>&nbsp;</td><td><pre class="example"> minus sign present           &lt;=&gt; not x         &lt;=&gt; 1 - mu(x)
 minus sign and hedge present &lt;=&gt; not &lt;hedge&gt; x &lt;=&gt; 1 - mu(x)^(dd/10)
 </pre></td></tr></table>

<p> Hedges and &quot;not&quot; in the consequent are handled similarly.
</p>
 <p> The intermediate result <var>rule_output</var>:
</p>
<p> For either a Mamdani-type FIS (that is, an FIS that does not have constant or
 linear output membership functions) or a Sugeno-type FIS (that is, an FIS
 that has only constant and linear output membership functions),
 <var>rule_output</var> specifies the fuzzy output for each (rule, FIS output) pair.
 The format of rule_output depends on the FIS type.
</p>
<p> For a Mamdani-type FIS, <var>rule_output</var> is a <var>num_points</var> x (Q * M)
 matrix, where Q is the number of rules and M is the number of FIS output
 variables. Each column of this matrix gives the y-values of the fuzzy
 output for a single (rule, FIS output) pair.
</p>
 <table><tr><td>&nbsp;</td><td><pre class="example"> </pre><pre class="example">                  Q cols            Q cols              Q cols 
             ---------------   ---------------     ---------------
             out_1 ... out_1   out_2 ... out_2 ... out_M ... out_M
          1 [                                                     ]
          2 [                                                     ]
        ... [                                                     ]
 num_points [                                                     ]
 </pre><pre class="example"> </pre></td></tr></table>

<p> For a Sugeno-type FIS, <var>rule_output</var> is a 2 x (Q * M) matrix.
 Each column of this matrix gives the (location, height) pair of the
 singleton output for a single (rule, FIS output) pair.
</p>
 <table><tr><td>&nbsp;</td><td><pre class="example"> </pre><pre class="example">                Q cols            Q cols                  Q cols 
           ---------------   ---------------         ---------------
           out_1 ... out_1   out_2 ... out_2   ...   out_M ... out_M
 location [                                                         ]
   height [                                                         ]
 </pre><pre class="example"> </pre></td></tr></table>

 <p> The intermediate result <var>fuzzy_output</var>:
</p>
<p> The format of <var>fuzzy_output</var> depends on the FIS type (&rsquo;mamdani&rsquo; or
 &rsquo;sugeno&rsquo;).
</p>
<p> For either a Mamdani-type FIS or a Sugeno-type FIS, <var>fuzzy_output</var>
 specifies the aggregated fuzzy output for each FIS output.
</p>
<p> For a Mamdani-type FIS, the aggregated <var>fuzzy_output</var> is a
 <var>num_points</var> x M matrix. Each column of this matrix gives the y-values
 of the fuzzy output for a single FIS output, aggregated over all rules.
</p>
 <table><tr><td>&nbsp;</td><td><pre class="example"> </pre><pre class="example">             out_1  out_2  ...  out_M
          1 [                        ]
          2 [                        ]
        ... [                        ]
 num_points [                        ]
 </pre><pre class="example"> </pre></td></tr></table>

<p> For a Sugeno-type FIS, the aggregated output for each FIS output is a 2 x L
 matrix, where L is the number of distinct singleton locations in the
 <var>rule_output</var> for that FIS output:
</p>
 <table><tr><td>&nbsp;</td><td><pre class="example"> </pre><pre class="example">           singleton_1  singleton_2 ... singleton_L
 location [                                        ]
   height [                                        ]
 </pre><pre class="example"> </pre></td></tr></table>

<p> Then <var>fuzzy_output</var> is a vector of M structures, each of which has an index and
 one of these matrices.
</p>
 <p> Examples:
</p>
<p> Seven examples of using evalfis are shown in:
 </p><ul>
<li>
 cubic_approx_demo.m
 </li><li>
 heart_disease_demo_1.m
 </li><li>
 heart_disease_demo_2.m
 </li><li>
 investment_portfolio_demo.m
 </li><li>
 linear_tip_demo.m
 </li><li>
 mamdani_tip_demo.m
 </li><li>
 sugeno_tip_demo.m
 </li></ul>

<p> <strong>See also: </strong>
  <a href="cubic_approx_demo.html">cubic_approx_demo</a>, 
  <a href="heart_disease_demo_1.html">heart_disease_demo_1</a>, 
  <a href="heart_disease_demo_2.html">heart_disease_demo_2</a>, 
  <a href="investment_portfolio_demo.html">investment_portfolio_demo</a>, 
  <a href="linear_tip_demo.html">linear_tip_demo</a>, 
  <a href="mamdani_tip_demo.html">mamdani_tip_demo</a>, 
  <a href="sugeno_tip_demo.html">sugeno_tip_demo</a>
</p>
</div>

        </div>
      </div>
    </div>

  </body>
</html>
